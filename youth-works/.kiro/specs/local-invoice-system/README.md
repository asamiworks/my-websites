# ローカル請求書システム 仕様書セット

## 📋 概要

このディレクトリには、クラウドサービスに依存しない完全ローカル実行型の請求書自動生成システムの仕様書一式が含まれています。

## 🎯 プロジェクト目標

- **ゼロコスト運用**: Firebase、Google Drive等の月額費用削減
- **完全自動化**: 毎月1日の請求書自動生成・保存
- **データ安全**: ローカル環境でのデータ完全管理
- **シンプル運用**: ドメイン不要、デプロイ不要

## 📚 仕様書構成

### 1. [requirements.md](./requirements.md) - 要件仕様書
**内容**: システムの目的、必須機能、非機能要件
- クライアント管理機能
- 請求書生成・PDF化機能
- 自動化・スケジューリング機能
- データ管理・バックアップ機能
- 成功基準・リスク分析

### 2. [design.md](./design.md) - 設計仕様書
**内容**: システムアーキテクチャ、技術スタック、詳細設計
- 4層アーキテクチャ設計
- Next.js + TypeScript技術スタック
- JSONファイルベースデータストレージ
- PDF生成・自動化機能設計
- セキュリティ・パフォーマンス設計

### 3. [tasks.md](./tasks.md) - 実装タスク仕様書
**内容**: 4フェーズ・8週間の開発計画
- フェーズ1: 基盤構築（2週間）
- フェーズ2: コア機能実装（3週間）
- フェーズ3: 自動化・運用機能（2週間）
- フェーズ4: テスト・デプロイ（1週間）

## 🏗️ システム構成概要

```
ローカル請求書システム
├── Frontend (Next.js/React)
│   ├── ダッシュボード
│   ├── クライアント管理
│   └── 請求書管理
├── API Layer (Next.js API Routes)
│   ├── RESTful API
│   └── PDF生成API
├── Business Logic
│   ├── 請求書生成エンジン
│   ├── 料金計算ロジック
│   └── 自動化スケジューラ
├── Data Layer (JSON Files)
│   ├── data/clients.json
│   ├── data/invoices.json
│   └── data/company.json
└── Storage
    ├── output/YYYY-MM/ (PDF保存)
    ├── logs/ (実行ログ)
    └── backups/ (バックアップ)
```

## 💾 技術スタック

### フロントエンド
- **Framework**: Next.js 15.x (App Router)
- **Language**: TypeScript 5.x
- **Styling**: Tailwind CSS 3.x
- **UI Components**: Radix UI + shadcn/ui
- **Form**: React Hook Form + Zod

### バックエンド
- **Runtime**: Node.js 20.x
- **API**: Next.js API Routes
- **PDF**: React-PDF (@react-pdf/renderer)
- **Storage**: JSON Files + File System
- **Automation**: node-cron

### インフラ
- **Environment**: Ubuntu 24.04 LTS
- **Deployment**: ローカル実行 (localhost:3000)
- **Scheduling**: Cron Jobs
- **Backup**: rsync + 外部ストレージ (オプション)

## 🚀 主要機能

### ✅ 実装予定機能
- [ ] **クライアント管理**: 登録・編集・削除・検索
- [ ] **請求書生成**: 月次自動生成・プレビュー・一括処理
- [ ] **PDF作成**: 日本語対応・カスタムレイアウト
- [ ] **自動化**: 毎月1日の自動実行・cronジョブ
- [ ] **データ管理**: JSONファイル・バックアップ・復旧
- [ ] **管理画面**: ダッシュボード・統計・ログ表示
- [ ] **設定管理**: 会社情報・システム設定

### 🔄 自動化フロー
```
毎月1日 午前9時
    ↓
前月分請求書生成対象クライアント抽出
    ↓
料金計算・請求書データ作成
    ↓
PDF生成・ローカル保存
    ↓
実行ログ記録・完了通知
```

## 📊 開発計画

### スケジュール（8週間）
- **Week 1-2**: 基盤構築（Next.js setup、UI基盤、データ層）
- **Week 3-5**: コア機能（クライアント管理、請求書生成、PDF）
- **Week 6-7**: 自動化・運用（スケジューラ、ダッシュボード、バックアップ）
- **Week 8**: テスト・デプロイ（統合テスト、本番環境構築）

### リソース配分
- **Frontend Developer**: 26人日
- **Backend Developer**: 23人日
- **DevOps Engineer**: 10人日
- **QA Engineer**: 9人日
- **合計**: 68人日

## 💰 コスト比較

| 項目 | クラウド版 (年間) | ローカル版 |
|------|------------------|------------|
| Firebase | $300+ | **$0** |
| Google Drive API | $72+ | **$0** |
| ドメイン・SSL | $50+ | **$0** |
| サーバー | $120+ | **$0** |
| **年間合計** | **$542+** | **$0** |

## 🎯 成功基準

### 機能的成功基準
- [ ] 月次自動生成成功率 99%以上
- [ ] PDF生成成功率 99.9%以上
- [ ] 全必須機能の正常動作

### 運用的成功基準
- [ ] 月次運用工数 2時間以下
- [ ] システム障害復旧時間 30分以内
- [ ] データ破損・消失事故 0件

### ユーザビリティ成功基準
- [ ] 新規クライアント登録 3分以内
- [ ] 請求書確認・修正 5分以内
- [ ] システム習得期間 1日以内

## 🔒 セキュリティ・品質

### セキュリティ要件
- ローカルファイルアクセス制限
- 入力値バリデーション徹底
- 機密情報の適切な保護
- 実行ログのアクセス制限

### 品質要件
- TypeScript strict mode
- 単体テストカバレッジ 80%以上
- コードレビュー必須
- 静的解析ツール使用

## 📈 将来拡張計画

### フェーズ2 (6ヶ月後)
- [ ] 複数会社管理
- [ ] 請求書テンプレート複数対応
- [ ] 支払い状況管理
- [ ] 売上分析・レポート

### フェーズ3 (1年後)
- [ ] マルチユーザー対応
- [ ] リモートアクセス機能
- [ ] 会計ソフト連携
- [ ] メール自動送信

## 🚨 リスク管理

### 主要リスク
1. **PDF生成パフォーマンス**: 事前検証・最適化で対応
2. **ファイルシステム制限**: 容量監視・アラートで対応
3. **Node.js互換性**: Docker化・固定版本で対応
4. **要件変更**: 変更管理プロセスで対応

## 📞 サポート・連絡先

- **プロジェクトマネージャー**: AsamiWorks PM
- **テクニカルリード**: Senior Developer
- **品質責任者**: QA Manager
- **承認者**: プロジェクト責任者

---

## 📝 使用方法

このKiro仕様書セットを使用して開発を進める場合：

1. **要件確認**: `requirements.md` で機能要件・非機能要件を確認
2. **設計理解**: `design.md` でアーキテクチャ・技術選択を理解
3. **実装計画**: `tasks.md` でフェーズ別タスクを確認・実行

### Kiroでの開発開始
```bash
# Kiro起動（プロジェクトルートで）
kiro

# 仕様書の確認
# → .kiro/specs/local-invoice-system/ 内の各ファイルを参照

# 開発開始
# → tasks.md のフェーズ1から順次実装
```

**最終更新**: 2024年10月28日
**バージョン**: 1.0
**ステータス**: ✅ 仕様書完成・実装開始可能