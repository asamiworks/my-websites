i-manabee（あいまなびー）開発仕様書（完全版）
最終更新: 2025-09-24 04:30
プロジェクト概要

サービス名: i-manabee（あいまなびー）
通称: まなびー
URL: i-manabee.com
目的: 6-18歳向けの安心して使える学習AI
開始日: 2025-01-20
開発者: AsamiWorks(浅見 洋輔)
現在のステータス: MVP開発中（UI未実装、複数プロファイル未対応、API接続OpenAi,claudeAPIのみ）
開発環境: C:\Users\洋輔\Documents\GitHub\my-websites\i-manabee

🐝 ブランドアイデンティティ
ネーミング

正式名称: i-manabee（あいまなびー）
通称: まなびー
意味: AI + I（私） + 学び + Bee（蜂）
キャッチコピー: 「 」

ビジュアル

メインカラー: #FFB300（ハニーイエロー）+ #FF6B6B（ハートピンク）
サブカラー: #4CAF50（安心グリーン）
キャラクター: まなびー先生（ハートを持った蜂）
ロゴ: i ❤️ 🐝 の組み合わせ

🎯 サービスの特徴
主要機能

複数子どもプロファイル管理

親アカウントで複数の子どもを管理
生年月日から学年を自動判定
PINコードによる簡易認証（4桁数字）
アバター選択機能（動物8種類）


年齢層別対応

小学1年-3年（初級）：ひらがな中心、絵文字多用
小学4年-6年（中級）：標準的な学習サポート
中学1年-中学3年（上級）：専門的な学習・進路相談
高校1年-高校3年（プロ）：一人の大人として専門的にサポート


教科別専門AI

教科ごとに最適なAIを配置
音声入力対応（Web Speech API）
ストリーミング表示で読みやすさ向上
各教科独立したコンテキスト管理



❌ スコープ外（実装しない機能）
意図的に実装しない機能

動画通話/音声通話機能
子ども同士のチャット機能
SNS的な機能（いいね、フォロー、共有等）
宿題の写真撮影→自動解答機能
保護者同士の交流機能
ゲーミフィケーション（ポイント、バッジ、ランキング等）
オフライン対応
ネイティブアプリ（Webアプリのみ）
学校/塾との連携機能
AIによる成績予測
詳細な学習分析（学習時間グラフ、理解度チャート等）
カレンダー/スケジュール管理
外部教材との連携
初回割引・クーポン機能

💰 ビジネスモデル
料金プラン プラン料金 利用制限 リセット 子ども数 広告 AIデータ 保存
お試し（未登録） 0円 2回のみ 24時間 - あり GPT-3.5 なし 
無料（登録済み） 0円 3回/期 4時間 1人 なし GPT-3.5 21日間 
まなびープレミアム 500円/月 無制限 - 3人まで なし 教科別最適AI 無期限
まなびーファミリー 800円/月 無制限 - 5人まで なし 教科別最適AI 無期限

アカウント作成促進フロー
1. 未登録ユーザーがアクセス
   ↓
2. 「まなびーを試してみる」ボタン
   ↓
3. 1回目の質問（広告表示あり）
   「まなびー先生に聞いてみよう！」
   ↓
4. 2回目の質問後に制限通知
   「無料アカウント作成で広告なし＆1日3回使える！」
   ↓
5. アカウント作成画面へ誘導
   「まなびーメンバーになる」
   ↓
6. 作成完了後
   「まなびープレミアムなら無制限！」でアップグレード促進
プラン変更時の処理
アップグレード（無料→有料）
項目処理適用タイミング即時データ移行全データ保持日割り計算なし（即日から満額）特典過去データの復活（21日以内）
ダウングレード（有料→無料）
項目処理警告適用タイミング次回更新日「〇月〇日に無料プランに変更されます」子どもプロファイル1人のみ選択「他のお子様のデータは削除されます」会話履歴最新10件のみ保持「古い会話は削除されます」アーカイブ30日後に全削除「保存した会話も削除されます。必要なデータはエクスポートしてください」猶予期間30日間「30日以内に再度有料プランに戻せばデータを復元できます」
コスト試算
項目お試し無料プレミアムファミリーAPIコスト/月約1円約8円約38円約38円広告収入/月+2円0円--実質コスト-1円8円38円38円収益/月+1円-8円462円762円利益率--92%95%
🤖 教科別AI配置戦略
無料プラン（お試し含む）

全教科：GPT-3.5-turbo

まなびープレミアム・ファミリープラン
教科使用AI選定理由想定利用率算数・数学Gemini 1.5 Flash計算精度最高30%理科Gemini 1.5 Flash実験・化学式の正確性15%英語GPT-4o miniネイティブ表現20%国語Claude 3 Haiku読解・作文添削15%社会Claude 3 Haiku論理的思考10%プログラミングClaude 3 Haikuコード品質5%悩み相談Claude 3 Haiku安全性最優先5%
💬 会話・セッション管理
セッション管理
項目設定値動作セッションタイムアウト15分（無操作）自動的にセッション終了セッション終了後次回アクセス時「続きから？新規から？」選択会話途中の新規開始いつでも可能「新しい会話」ボタン常時表示
会話管理フロー
【通常の操作フロー】
1. チャット画面に「新しい会話」ボタン常設
   ↓
2. ユーザーが選択可能：
   a) そのまま続ける → 現在の会話を継続
   b) 新しい会話 → 確認ダイアログ表示
   ↓
3. 新しい会話開始時の確認
   「現在の会話を保存しますか？」
   - 保存する → active_chatsに保存
   - 保存しない → 破棄して新規開始

【セッション切れ後のフロー】
1. 15分無操作でセッション終了
   ↓
2. 次回アクセス時
   「まなびー先生との会話を続けますか？」
   - 続ける → 最後の5メッセージ表示
   - 新しく始める → 新規会話開始
データ保存ポリシー
データ種別お試し無料会員有料会員アクティブ会話なし21日間無期限会話数上限-10会話無制限アーカイブ-なし無期限自動削除セッション終了時21日後なし（エクスポート対応不要）
🎨 UI/UXデザインシステム
カラーパレット
用途カラーコード使用箇所プライマリ#FFB300まなびーイエロー（メインボタン、ヘッダー）セカンダリ#FF6B6Bハートピンク（愛情表現）安心#4CAF50安心グリーン（成功メッセージ）無料プラン#9E9E9E無料プランバッジプレミアム#FFB300プレミアムバッジファミリー#2196F3ファミリーバッジ危険/エラー#FF5252エラーメッセージ、警告警告#FFC107注意メッセージ背景#FFF8E1薄いハニー色テキスト#212121本文
フォント仕様
年齢層フォントサイズ行間文字間隔6-8歳游ゴシック、ヒラギノ丸ゴ20px以上1.80.1em9-12歳游ゴシック、ヒラギノ角ゴ16px以上1.60.05em13-18歳游ゴシック、ヒラギノ角ゴ14px以上1.5normal
レスポンシブ対応
css/* ブレークポイント */
@media (max-width: 767px) { /* Mobile */ }
@media (min-width: 768px) and (max-width: 1023px) { /* Tablet */ }
@media (min-width: 1024px) { /* Desktop - 最大幅1200px */ }
UI状態管理
状態表示アニメーション実装AI思考中「まなびー先生が考えています...🐝」蜂が八の字に飛ぶCSS animation送信中「送信中...」スピナーSVG rotationエラー「エラーが発生しました」シェイクCSS shakeネットワークエラー「インターネットを確認してね」-静的表示メンテナンス「まなびーのお昼寝時間です」-静的表示利用制限到達「今日はここまで！また後でね」フェードインCSS transition
🔄 データ構造
Firestoreデータ構造（完全版）
javascript// ユーザー（保護者）
users/{userId}/
├── profile/
│   ├── email: string
│   ├── plan: "trial" | "free" | "premium" | "family"
│   ├── previousPlan: string | null  // ダウングレード時の元プラン
│   ├── planChangedAt: timestamp
│   ├── createdAt: timestamp
│   ├── paymentStatus: {
│   │   ├── customerId: string (Stripe)
│   │   ├── subscriptionId: string
│   │   ├── nextBillingDate: timestamp
│   │   └── cancellationDate: timestamp | null
│   │ }
│   └── settings: {
│       ├── emailNotifications: boolean
│       ├── safetyAlerts: boolean
│       └── weeklyReports: boolean
│     }
├── children/{childId}/
│   ├── nickname: string
│   ├── birthMonth: "YYYY-MM"
│   ├── avatar: string (animal_type)
│   ├── pin: string (bcrypt hashed)
│   ├── ageGroup: "junior" | "middle" | "senior"
│   ├── createdAt: timestamp
│   ├── lastActiveAt: timestamp
│   └── isActive: boolean  // ダウングレード時false
├── active_chats/{chatId}/
│   ├── childId: string
│   ├── subject: string
│   ├── messages: array[
│   │   ├── role: "user" | "assistant"
│   │   ├── content: string
│   │   ├── timestamp: timestamp
│   │   └── flagged: boolean
│   │ ]
│   ├── createdAt: timestamp
│   ├── lastMessageAt: timestamp
│   ├── sessionActive: boolean
│   ├── sessionExpiry: timestamp
│   └── metadata: {
│       ├── messageCount: number
│       ├── aiModel: string
│       └── tokenCount: number
│     }
├── archived_chats/{chatId}/  // 有料プランのみ
│   ├── (active_chatsと同じ構造)
│   ├── archivedAt: timestamp
│   ├── archivedBy: string (userId)
│   └── tags: array<string>
├── usage_tracking/
│   ├── daily/{date}/
│   │   ├── messagesSent: number
│   │   ├── tokensUsed: number
│   │   └── subjects: map<string, number>
│   ├── free_tier_count: number (0-3)
│   ├── free_tier_reset: timestamp
│   ├── trial_count: number (0-2)
│   └── trial_reset: timestamp
├── safety_logs/  // 悩み相談検知ログ
│   └── {logId}/
│       ├── childId: string
│       ├── detectedAt: timestamp
│       ├── severity: "low" | "medium" | "high"
│       ├── keywords: array<string>
│       ├── message: string
│       └── parentNotified: boolean
└── reports/
    ├── weekly/{weekId}/
    │   ├── weekOf: date
    │   ├── childReports: array[{
    │   │   ├── childId: string
    │   │   ├── questionsAsked: array<string>
    │   │   ├── difficultTopics: array<string>
    │   │   └── flaggedMessages: number
    │   │ }]
    │   └── generatedAt: timestamp
    └── monthly/ (同様の構造)
📋 利用規約・免責事項
免責事項

まなびーは学習を補助するものであり、成績向上を保証しない
医療的なアドバイスは提供しない
保護者が子どもの利用を監督する責任を持つ
AIの回答は必ずしも正確でない可能性がある
学校の宿題を代わりに解くサービスではない
システム障害による学習機会の損失は補償しない

禁止事項

本名、住所、学校名などの個人情報入力
他人のアカウントの不正使用
学習目的以外での利用
AIを使った不正行為（カンニング等）
商用利用
著作権侵害行為
自動化ツールの使用
リバースエンジニアリング

年齢制限
項目詳細対象年齢6-18歳保護者同意必須（利用規約同意）アカウント作成保護者のみ可能13歳未満COPPA準拠対応年齢詐称対策生年月日変更不可
🔐 セキュリティ・プライバシー
データ収集最小化原則
データ種別収集する収集しない保護者メールアドレス、決済情報氏名、住所、電話番号子どもニックネーム、生年月本名、学校名、成績学習データ質問内容、苦手分野写真、音声録音行動ログアクセス時間、利用教科IPアドレス（ハッシュ化）
データ保持・削除ポリシー
データ種別保持期間削除タイミングバックアップチャット履歴（無料）21日自動削除なしチャット履歴（有料）無期限手動削除のみ日次アーカイブ無期限手動削除のみ日次ダウングレード時データ30日間自動削除なしアカウント情報退会後30日自動削除7日間決済情報法定7年自動削除Stripe管理ログデータ30日自動削除なし安全ログ90日自動削除30日間
🚨 子どもの安全対策
悩み相談検知システム
検知レベルと対応
レベルキーワード例保護者通知AI対応システム対応緊急度:高死にたい、消えたい、自殺、虐待、リスカ即時メール+SMS相談窓口案内、傾聴ログ保存、エスカレーション緊急度:中いじめ、学校行きたくない、つらい、友達いない24時間以内メール励まし、アドバイスログ保存、週次レポート記載緊急度:低勉強できない、嫌い、めんどくさい週次レポート記載通常対応統計データとして記録
相談窓口情報（自動表示）
【相談できる場所】
- チャイルドライン: 0120-99-7777
- 24時間子供SOSダイヤル: 0120-0-78310
- 189（いちはやく）: 児童相談所
📊 保護者向けレポート機能
レポート内容
週次レポート（プレミアム・ファミリーのみ）
【〇〇くんの今週のまなびー学習】
更新日: 2025年09月24日

■ 頑張っている教科と内容
- 算数：分数の割り算について（5回）
- 国語：漢字の書き順について（3回）
- 英語：過去形の作り方（2回）

■ つまずいているところ
- 割合の計算がまだ理解できていない様子です
- 英語の過去形で混乱が見られます
- 漢字の部首の理解に課題があります

■ 気になる相談
⚠️ 「友達とけんかした」という相談がありました
  まなびー先生からは励ましの言葉をかけています

📱 広告実装（お試しユーザーのみ）
広告表示ルール
ユーザー種別広告表示表示位置サイズお試し（未登録）あり画面上部固定320x50無料（登録済み）なし--プレミアムなし--ファミリーなし--
広告メッセージ
html<div class="trial-header">
  <div class="ad-banner"><!-- Google AdSense --></div>
  <div class="trial-message">
    <span>広告なしで使うなら</span>
    <button>まなびーメンバーになる（無料）</button>
  </div>
</div>
💳 決済・返金ポリシー
決済方法
項目詳細決済代行Stripe対応カードVISA, Mastercard, AMEX, JCB請求サイクル月額前払い自動更新あり（解約まで継続）領収書メールで自動送付
返金ポリシー
条件期限返金額手続き初回登録7日以内全額自動承認サービス障害随時日割り計算サポート確認後重複課金30日以内重複分全額自動検知・返金規約違反-返金なし-通常解約-返金なし次回更新停止
⚙️ システム要件
パフォーマンス要件
指標目標値測定方法アラート閾値ページ読込時間< 2秒Lighthouse> 3秒AI応答開始時間< 5秒カスタムログ> 7秒ストリーミング速度30文字/秒フロントエンド測定< 20文字/秒音声認識開始< 1秒Web Speech API> 2秒エラー率< 0.1%ログ集計> 1%可用性99.5%Uptime監視< 99%
エラー処理
エラー種別システム対応ユーザー表示リトライAPIタイムアウト15秒→代替AI切替「ちょっと待ってね🐝」自動1回AI応答エラー別モデルに切替「別の先生に聞いてみるね」自動1回レート制限キュー管理「少し待ってね⏰」60秒後利用制限到達カウンターリセット待機「また後で話そうね🐝」なしネットワークエラー接続チェック「ネットが不安定みたい📶」手動
🎭 AIの人格設定
基本人格
項目設定名前まなびー先生一人称先生/ぼく（6-8歳向け）二人称〇〇くん/ちゃん口調優しく親しみやすい絵文字使用🐝を中心に2-3個/メッセージキャラクター勉強が大好きな蜂
年齢別対応詳細
年齢層話し方説明方法褒め方注意の仕方6-8歳「〜だよ」「〜だね」身近な例え（はちみつ、花）「すごーい！🐝」「えらいね！🌟」「もう一回やってみよう」9-12歳です・ます調学校の授業に関連「よくできました🐝」「ここは間違えやすいところです」13-18歳敬語混じり実社会・受験関連「論理的な思考ですね」「別の視点から考えてみましょう」
プロンプトテンプレート
あなたは「まなびー先生」という、勉強が大好きな蜂のキャラクターです。
- {age}歳の{nickname}くん/ちゃんと会話しています
- 教科: {subject}
- 蜂の絵文字🐝を適度に使ってください
- 「はちみつのように甘い成功体験」を大切にしています
- 間違いは優しく訂正し、努力を褒めてください
- 個人情報を聞き出さないでください
📊 ログ・モニタリング
ダッシュボード指標
リアルタイム（更新頻度: 1分）

現在のアクティブユーザー数
直近5分のエラー率
API応答時間（p50, p95, p99）
現在のメッセージ送信数/分

日次指標

DAU（Daily Active Users）
新規登録数（まなびーメンバー）
教科別利用率
平均セッション時間

月次指標

MAU（Monthly Active Users）
MRR（Monthly Recurring Revenue）
チャーン率
LTV（Life Time Value）

🛠 技術スタック
フロントエンド
技術バージョン用途状態HTML5-構造✅ 実装済みCSS3-スタイル✅ 実装済みJavaScriptES6+動作制御✅ 実装済みWeb Speech API-音声入力✅ 実装済み
バックエンド
技術バージョン用途状態Node.js18.x LTSサーバー✅ 実装済みExpress4.18.xAPIサーバー✅ 実装済みFirebase Admin11.x認証・DB🔄 実装中
AI/API
サービスモデル用途状態OpenAIGPT-3.5-turbo無料プラン🔄 実装中OpenAIGPT-4o mini英語（有料）⬜ 未実装Google AIGemini 1.5 Flash算数・理科⬜ 未実装AnthropicClaude 3 Haiku国語・他⬜ 未実装
インフラ・サービス
サービス用途状態Firebase Hostingホスティング⬜ 未実装Firebase Auth認証🔄 実装中Firestoreデータベース🔄 実装中Stripe決済⬜ 未実装Google AdSense広告⬜ 未実装
📂 プロジェクト構造
i-manabee/
├── 📄 フロントエンド/
│   ├── public/
│   │   ├── index.html              # ランディング・ログイン
│   │   ├── signup.html             # まなびーメンバー登録
│   │   ├── chat.html               # チャット画面
│   │   ├── profile-select.html    # 子どもプロファイル選択
│   │   ├── room-select.html       # 教科選択
│   │   ├── parent-dashboard.html  # 保護者ダッシュボード
│   │   └── terms.html             # 利用規約
│   ├── 🎨 css/
│   │   ├── manabee-theme.css     # まなびーテーマ
│   │   └── (その他CSS)
│   └── 📜 js/
│       └── (JavaScriptファイル)
├── 🔧 バックエンド/
│   └── (サーバーファイル)
├── ⚙️ 設定ファイル/
│   ├── package.json
│   ├── .env.local
│   └── firebase.json
└── 📚 ドキュメント/
    └── PROJECT.md              # この仕様書
🚀 開発ロードマップ
Phase 1: MVP完成

まなびー基本機能実装
Firebase連携
GPT-3.5接続

Phase 2: プレミアム機能

まなびープレミアム・ファミリー機能
教科別AI実装
Stripe決済

Phase 3: 運用準備

i-manabee.comドメイン設定
利用規約確定
セキュリティ監査

Phase 4: 正式リリース

「まなびー」として正式公開
プロモーション開始
ママ友ネットワークでの拡散

📈 成功指標（KPI）
ビジネス指標
指標3ヶ月6ヶ月12ヶ月まなびーメンバー数2,0006,00015,000MAU1,0005,00010,000有料会員数504001,000月間収益2.5万円20万円50万円
📞 運用体制
連絡先

サービスURL: https://i-manabee.com
サポート: support@i-manabee.com
公式SNS:Instagram: @asamiworks
ハッシュタグ: #まなびー #あいまなびー



🔄 更新履歴
日付バージョン更新内容2025-01-20v1.0.0初版作成（YouthWorks）2025-01-22v4.0.0ダウングレード警告追加2025-01-22v5.0.0サービス名変更（i-manabee/まなびー）

この仕様書は開発の進行に応じて更新されます。
「まなびー」で、愛があるAI学習を。
Copyright © 2025 AsamiWorks. All rights reserved.