# 🗺️ i-manabee プロジェクトロードマップ

最終更新: 2025-10-07  
Version: 2.0.0

---

## 📚 前提ドキュメント

このドキュメントは以下を詳細化したものです：
- [完全仕様書](../i-manabee完全仕様書.md) - 「段階的実装計画」セクション

---

## 🎯 プロジェクトビジョン

**ミッション**: 6-18歳の子どもたちに「安心して使えるAI学習体験」を提供し、AIリテラシー教育の新しいスタンダードを創造する

**核心価値**:
1. **プロンプトエンジニアリング教育**: AIを使いこなす力を育てる
2. **安心・安全**: 保護者が推奨できる学習環境
3. **段階的成長**: 子どもの発達に合わせた学習体験

---

## 📊 フェーズ概要

| Phase | 期間 | 目標ユーザー数 | 売上目標 | 必要会員数 | 状況 |
|-------|------|--------------|---------|-----------|------|
| Phase 1: MVP | 0-3ヶ月 | 1-50人 | 0-50万円/月 | 2人 | ✅ 完了 |
| Phase 2: Growth | 3-6ヶ月 | 50-200人 | 50-200万円/月 | 10人 | 🚧 準備中 |
| Phase 3: Scale | 6-12ヶ月 | 200-1,000人 | 200-500万円/月 | 40人 | ⏸️ 未着手 |
| Phase 4: Enterprise | 12ヶ月〜 | 1,000人以上 | 500万円/月〜 | 100人 | ⏸️ 未着手 |

---

## 🚀 Phase 1: MVP（完了）

### 📅 期間
2025-09-24 〜 2025-10-06（約2週間）

### 🎯 目標
- 基本的なAIチャット機能の実装
- 7教科すべてが動作
- ローカル開発環境で動作確認

### ✅ 達成した成果物

#### 実装済み機能
- [x] 教科選択画面（ホーム）
- [x] ストリーミングチャット
- [x] 7教科対応
  - [x] 算数・理科: Gemini 2.5 Flash-Lite
  - [x] 国語・英語・社会: OpenAI GPT-4o-mini
  - [x] プログラミング: Claude Sonnet 4.5
  - [x] 悩み相談: Claude Sonnet 4.5
- [x] 安全性監視システム（基本）
- [x] レスポンシブUI

#### 技術スタック
- Next.js 14 (App Router)
- TypeScript
- Tailwind CSS + shadcn/ui
- Firebase (Firestore, Functions)
- AI: Gemini, OpenAI, Claude

#### 画面
/                    - ホーム（教科選択）
/chat?subject=xxx    - チャット画面
/api/chat            - ストリーミングAPI
/api/safety          - 安全性チェックAPI

### 📊 成果指標
- デプロイ: ローカル開発環境
- ユーザー数: 0人（開発者のみ）
- 技術検証: 完了
- 次フェーズへの準備: 完了

### 📝 詳細仕様
[phases/PHASE1_MVP.md](./phases/PHASE1_MVP.md)

---

## 🌱 Phase 2: Growth（現在）

### 📅 期間
2025-10-07 〜 2025-12-31（約3ヶ月）

### 🎯 目標
- 認証・決済システムの実装
- 実際のユーザーを獲得（50-200人）
- 月間売上50万円達成
- 使用量管理とプラン制限

### 💰 経済指標
- 月間インフラコスト: 2,000円
- API費用想定: 3,000円/月
- 必要会員数: 10人（損益分岐点）
- 目標: 月間売上50万円

### 📋 サブフェーズ

#### Phase 2.1: 認証システム（Week 1-2）⭐ 次のタスク
**期間**: 2025-10-07 〜 2025-10-20（2週間）  
**依存**: なし  
**詳細**: [phases/PHASE2-1_AUTH.md](./phases/PHASE2-1_AUTH.md)

**実装内容**:
- [ ] Firebase Authentication統合
- [ ] ログイン/サインアップ画面
- [ ] ユーザー状態管理（Zustand）
- [ ] 保護されたルート（middleware）
- [ ] 基本的なダッシュボード

**成果物**:
/login              - ログイン画面
/signup             - サインアップ画面
/dashboard          - ダッシュボード

---

#### Phase 2.2: マイページ（Week 3）
**期間**: 2025-10-21 〜 2025-10-27（1週間）  
**依存**: Phase 2.1完了  
**詳細**: [phases/PHASE2-2_MYPAGE.md](./phases/PHASE2-2_MYPAGE.md)

**実装内容**:
- [ ] ダッシュボード強化
- [ ] プロフィール管理
- [ ] 子どもプロファイル管理
  - [ ] 追加/編集/削除
  - [ ] PIN設定
  - [ ] アバター選択
  - [ ] 年齢グループ設定

**成果物**:
/dashboard          - ダッシュボード
/profile            - プロフィール編集
/children           - 子どもプロファイル管理
/settings           - 設定

---

#### Phase 2.3: 決済システム（Week 4-5）
**期間**: 2025-10-28 〜 2025-11-10（2週間）  
**依存**: Phase 2.2完了  
**詳細**: [phases/PHASE2-3_PAYMENT.md](./phases/PHASE2-3_PAYMENT.md)

**実装内容**:
- [ ] Stripe統合
  - [ ] Checkout Session
  - [ ] Customer Portal
  - [ ] Webhook処理
- [ ] プラン管理
  - [ ] 無料プラン
  - [ ] まなびーキッズ（480円/月）
  - [ ] まなびーフレンズ（880円/月）
  - [ ] まなびープレミアム（1,540円/月）
- [ ] 請求管理
  - [ ] 請求履歴
  - [ ] 領収書ダウンロード

**成果物**:
/pricing            - プラン選択
/billing            - 請求情報
/subscription       - サブスクリプション管理

---

#### Phase 2.4: 使用量管理（Week 6）
**期間**: 2025-11-11 〜 2025-11-17（1週間）  
**依存**: Phase 2.3完了  
**詳細**: [phases/PHASE2-4_USAGE.md](./phases/PHASE2-4_USAGE.md)

**実装内容**:
- [ ] トークンカウントシステム
  - [ ] リアルタイム追跡
  - [ ] Firestoreに保存
  - [ ] プラン別制限チェック
- [ ] 使用量表示UI
  - [ ] 残量表示
  - [ ] 使用履歴グラフ
  - [ ] 期のリセット（6時・18時）

**成果物**:
/usage              - 使用状況ダッシュボード

---

#### Phase 2.5: チャット機能拡張（Week 7-8）⭐ 重要機能
**期間**: 2025-11-18 〜 2025-12-01（2週間）  
**依存**: Phase 2.2完了（子どもプロファイル）  
**詳細**: [phases/PHASE2-5_CHAT.md](./phases/PHASE2-5_CHAT.md)

**実装内容**:
- [ ] メッセージ候補機能（静的）
  - [ ] 教科×年齢の84個テンプレート
  - [ ] UI実装（カルーセル）
- [ ] メッセージ候補機能（動的）⭐
  - [ ] 会話履歴解析
  - [ ] ルールベース提案
  - [ ] 静的+動的の組み合わせ表示
- [ ] チャット履歴保存
- [ ] 会話の続きから再開

**参照**: [MESSAGE_TEMPLATES.md](./MESSAGE_TEMPLATES.md)

**期待効果**:
- エンゲージメント: +30%
- 継続率（3ヶ月）: +20%
- 平均会話長: +40%

---

#### Phase 2.6: 安全性システム強化（Week 9-10）
**期間**: 2025-12-02 〜 2025-12-15（2週間）  
**依存**: Phase 2.2完了  
**詳細**: [phases/PHASE2-6_SAFETY.md](./phases/PHASE2-6_SAFETY.md)

**実装内容**:
- [ ] 緊急キーワード検知強化
- [ ] 保護者通知システム
  - [ ] メール通知
  - [ ] 緊急度別の対応フロー
- [ ] 週次レポート（自動メール）
- [ ] 安全ログ管理画面

**成果物**:
/safety             - 安全ログ管理
/reports            - 週次レポート

---

### 📦 Phase 2での追加技術
- Stripe（決済）
- SendGrid（メール通知）
- Zustand（状態管理）
- Zod（バリデーション）

### 🎯 Phase 2終了時の目標
- [ ] 有料ユーザー: 50人以上
- [ ] 月間売上: 50万円以上
- [ ] チャーン率: 10%以下
- [ ] NPS: +30以上
- [ ] Phase 3への移行判断

---

## 📈 Phase 3: Scale（将来）

### 📅 期間
2026-01-01 〜 2026-06-30（6ヶ月）

### 🎯 目標
- ユーザー数: 200-1,000人
- 月間売上: 200-500万円
- マイクロサービス化の準備

### 💰 経済指標
- 月間インフラコスト: 5,000円
- API費用想定: 15,000円/月
- 必要会員数: 40人（損益分岐点）

### 📋 主要機能
- [ ] 5人までの子どもプロファイル
- [ ] 詳細な利用分析ダッシュボード
- [ ] 管理者向け監視画面
- [ ] A/Bテスト基盤
- [ ] CloudFlare DDoS対策
- [ ] Redis導入（キャッシュ）
- [ ] 日次自動バックアップ

### 📦 追加技術
- Redis (Upstash)
- Docker化
- Cloud Run
- Grafana監視
- Sentry（エラー監視）

### 🎯 Phase 3終了時の目標
- [ ] 有料ユーザー: 200人以上
- [ ] 月間売上: 200万円以上
- [ ] 可用性: 99.9%
- [ ] Phase 4への移行判断

---

## 🏢 Phase 4: Enterprise（将来）

### 📅 期間
2026-07-01 〜（12ヶ月以上）

### 🎯 目標
- ユーザー数: 1,000人以上
- 月間売上: 500万円以上
- B2B展開

### 💰 経済指標
- 月間インフラコスト: 15,000円〜
- API費用想定: 50,000円/月
- 必要会員数: 100人（損益分岐点）

### 📋 主要機能
- [ ] 無制限プロファイル（プレミアム）
- [ ] 専門機関連携
- [ ] B2B API提供
- [ ] 多言語対応準備
- [ ] データ分析基盤（BigQuery）
- [ ] パーソナライズAI提案⭐

### 📦 完全インフラ
- Kubernetes
- マルチリージョン
- BigQuery
- Datadog
- 24/7監視体制

### 詳細仕様
[エンタープライズ版仕様書](../エンタープライズ版仕様書.md)

---

## 🔗 フェーズ間の依存関係
Phase 1 (MVP)
↓
Phase 2.1 (認証) ← 必須
↓
Phase 2.2 (マイページ) ← 必須
├→ Phase 2.3 (決済)
├→ Phase 2.4 (使用量管理)
├→ Phase 2.5 (チャット拡張)
└→ Phase 2.6 (安全性)
↓
Phase 2 完了
↓
Phase 3 (Scale)
↓
Phase 4 (Enterprise)

### 依存関係の詳細

**Phase 2.1（認証）**:
- 依存: なし
- 必須: Phase 2全体の基盤

**Phase 2.2（マイページ）**:
- 依存: Phase 2.1
- 必須: 子どもプロファイルがPhase 2.5で必要

**Phase 2.3（決済）**:
- 依存: Phase 2.2
- 並行可能: Phase 2.4, 2.5, 2.6と並行実装可能

**Phase 2.5（チャット拡張）**:
- 依存: Phase 2.2（子どもプロファイルの年齢情報が必要）
- 並行可能: Phase 2.3, 2.4, 2.6と並行実装可能

---

## 🎯 マイルストーン

### M1: Phase 1完了（✅ 達成）
- 日付: 2025-10-06
- 成果: 7教科すべて動作確認完了

### M2: Phase 2.1完了（🎯 次の目標）
- 予定: 2025-10-20
- 成果: 認証システム稼働

### M3: Phase 2.2完了
- 予定: 2025-10-27
- 成果: マイページと子どもプロファイル管理

### M4: Phase 2.3完了
- 予定: 2025-11-10
- 成果: 決済システム稼働、有料プラン開始

### M5: Phase 2完了
- 予定: 2025-12-31
- 成果: 月間売上50万円達成

### M6: Phase 3開始判断
- 予定: 2026-01-01
- 条件:
  - 月間売上: 50万円以上
  - ユーザー数: 100人以上
  - チャーン率: 10%以下

---

## ⚠️ リスク管理

### Phase 2のリスク

#### リスク1: ユーザー獲得の遅れ
**確率**: 中  
**影響**: 高  
**対策**:
- SNSマーケティング（Instagram, Twitter）
- 無料プランでの初期ユーザー獲得
- 紹介キャンペーン

#### リスク2: API費用の想定超過
**確率**: 低  
**影響**: 中  
**対策**:
- リアルタイムコスト監視
- プラン別制限の厳格化
- キャッシュ活用

#### リスク3: 開発遅延
**確率**: 中  
**影響**: 中  
**対策**:
- 週次進捗確認
- Phase内の優先順位明確化
- 必須機能とオプション機能の分離

#### リスク4: セキュリティインシデント
**確率**: 低  
**影響**: 高  
**対策**:
- 子どもの安全性を最優先
- 定期的なセキュリティレビュー
- 緊急対応フローの準備

---

## 📊 KPI定義

### Phase 2のKPI

#### 成長指標
- **MRR（月間経常収益）**: 目標50万円
- **ユーザー数**: 目標100人
- **有料転換率**: 目標20%
- **チャーン率**: 目標10%以下

#### エンゲージメント指標
- **DAU/MAU比率**: 目標30%
- **平均セッション長**: 目標10分
- **週間利用回数**: 目標3回以上
- **メッセージ数/セッション**: 目標5回以上

#### 教育効果指標
- **学習継続率（1ヶ月）**: 目標60%
- **学習継続率（3ヶ月）**: 目標40%
- **保護者満足度（NPS）**: 目標+30

#### 技術指標
- **API応答時間（P95）**: 目標<1秒
- **エラー率**: 目標<0.1%
- **可用性**: 目標99%

---

## 🚦 Phase移行基準

### Phase 2 → Phase 3への移行条件

**必須条件（すべて満たす必要あり）**:
- [ ] 月間売上: 50万円以上を3ヶ月連続
- [ ] 有料ユーザー: 100人以上
- [ ] チャーン率: 10%以下
- [ ] 可用性: 99%以上
- [ ] Phase 2の全機能が安定稼働

**推奨条件（2つ以上満たす）**:
- [ ] NPS: +30以上
- [ ] 有料転換率: 20%以上
- [ ] DAU/MAU: 30%以上
- [ ] インフラコストが売上の20%以下

**判断プロセス**:
1. 月次KPIレビュー
2. ユーザーフィードバック分析
3. 技術的負債の評価
4. Phase 3実装計画の策定
5. Go/No-Go判断

---

## 📅 開発スケジュール（Phase 2詳細）

### 2025年10月（Week 1-4）

**Week 1-2: Phase 2.1（認証システム）**
- Day 1-3: Firebase Auth設定、ログイン画面
- Day 4-7: サインアップ画面、状態管理
- Day 8-10: 保護されたルート、ダッシュボード
- Day 11-14: テスト、バグ修正

**Week 3: Phase 2.2（マイページ）**
- Day 15-17: ダッシュボード強化、プロフィール管理
- Day 18-21: 子どもプロファイル管理

**Week 4: Phase 2.3開始（決済システム）**
- Day 22-28: Stripe統合、プラン設計

### 2025年11月（Week 5-9）

**Week 5: Phase 2.3続き**
- Day 29-35: プラン管理、請求管理

**Week 6: Phase 2.4（使用量管理）**
- Day 36-42: トークンカウント、使用量表示

**Week 7-8: Phase 2.5（チャット拡張）⭐**
- Day 43-49: メッセージ候補（静的）
- Day 50-56: メッセージ候補（動的ルールベース）

**Week 9: Phase 2.6開始（安全性）**
- Day 57-63: 緊急キーワード強化、保護者通知

### 2025年12月（Week 10-13）

**Week 10: Phase 2.6続き**
- Day 64-70: 週次レポート、安全ログ管理

**Week 11-12: 統合テスト・バグ修正**
- Day 71-84: 全機能の統合テスト、バグ修正

**Week 13: 本番リリース準備**
- Day 85-91: 本番環境デプロイ、監視設定

---

## 🎓 学習曲線

各フェーズでの技術的学習事項：

### Phase 2.1: 認証
- Firebase Authentication
- セッション管理
- セキュアなルート保護

### Phase 2.3: 決済
- Stripe API
- Webhook処理
- サブスクリプション管理

### Phase 2.5: チャット拡張
- 会話履歴解析
- ルールベース推論
- キーワード抽出

### Phase 3: スケール
- Redis キャッシュ
- Docker コンテナ化
- 監視ツール（Grafana, Sentry）

### Phase 4: エンタープライズ
- Kubernetes
- マイクロサービス
- BigQuery分析

---

## 📞 次のアクション

### 今すぐ
1. [DESIGN_SYSTEM.md](./DESIGN_SYSTEM.md) を読む
2. [TYPE_REFERENCE.md](./TYPE_REFERENCE.md) を読む
3. [phases/PHASE2-1_AUTH.md](./phases/PHASE2-1_AUTH.md) で実装開始

### Phase 2.1完了後
1. [PROGRESS.md](./PROGRESS.md) を更新
2. [phases/PHASE2-2_MYPAGE.md](./phases/PHASE2-2_MYPAGE.md) で次の実装

---

**最終更新**: 2025-10-07  
**次回レビュー**: Phase 2.1完了時（2025-10-20予定）